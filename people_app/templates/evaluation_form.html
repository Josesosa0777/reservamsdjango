{% extends 'base.html' %}

{%block title %}
  <title>Evaluation </title>
{% endblock title%}

{%block content %}
  <div class="container mt-5">
    <div class="">
      <h3 class="">Reporte Individual - {{person}}</h3><br>
      <h2>Criterios de Evaluación Reservamos</h2> <br>
      <p>El Performance Review está dividido en dos áreas claves que en total suman un 100%.</p>
      <h3>Performance Review:</h3>
    </div>

    <div class="table-responsive mt-3">
      <table class="table table-bordered table-hover">
          <thead>
          <tr>
              <td>Competencias:</td>
              <td>Logro de OKR's:</td>
              <td>Total:</td>
          </tr>
          </thead>
          <tbody>
          <tr>
              <td>30%</td><td>70%</td><td>100%</td>
          </tr>
          </tbody>
      </table>
    </div>
    <div class="container-questions-report">
      <h3>Escala que mide los resultados:</h3>
      <div class="color-scale">
          <p class="red"> Red: 0 - 49.9 % </p>
          <p class="yellow"> Yellow: 50 - 80.9 % </p>
          <p class="green"> Green: 81 - 100 %</p>
          <p class="blue"> Blue: Mayor a 100 % </p>
      </div>
    </div>

    <div class="table-responsive mt-3 ">
      <h4>Ponderación de resultados, competencias y OKRs</h4>
      <table class="table table-bordered table-hover">
          <thead>
              <tr>
                  <th class=".col-results">Resultado de OKRs</th>
                  <th class=".col-results">Autoevaluación Competencias</th>
                  <th class=".col-results">Evaluación del equipo (Competencias)</th>
                  <th class=".col-results">Total</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td>{{result_okr}} %</td>
                  <td>{{self_evaluation}} %</td>
                  <td>{{team_evaluation}} %</td>
                  <td>{{total_evaluation}} %</td>
              </tr>
          </tbody>
      </table>
    </div>

    <div class="card graph col-md-6 offset-md-3 my-5">
      <div class="card-body">
          <p>Resultados por competencias</p>
          <hr>
      </div>

      <div class="card-body">
        <canvas id="myChart" width="250" height="150"></canvas>
      </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script>
        var ctx = document.getElementById('myChart').getContext('2d');
        var chart = new Chart(ctx, {
            // The type of chart we want to create can be line, bar, horizontalBar, pie, radar, doughnut, polarArea ...
            type: 'bar',    <!-- https://www.chartjs.org/docs/latest/getting-started/ -->

            // The data for our dataset https://www.youtube.com/watch?v=B5rCrmXK5Y0
            data: {
                labels: [ {% for item in y_values %}
                             "{{ item }}",
                           {% endfor %} ],  // ['January', 'February', 'March', 'April', 'May', 'June', 'July']
                datasets: [{
                    label: 'Performance Review', //
                    backgroundColor: 'rgb(128, 0, 128)', // if I want a color for each bar, i add  values as a matrix
                    borderColor: 'indigo',
                    borderWidth: 2, // width in pixels
                    barThickness: 18,
                    maxBarThickness: 30,
                    data: [ {% for item in x_values %}
                                "{{ item }}",
                            {% endfor %} ]  // [0, 10, 5, 2, 20, 30, 45]
                }]
            },

            // Configuration options go here
            options: {
                legend: {
                    display: false,  // if true, it appears
                    position: 'right', // default in the center
                    labels: {
                        // This more specific font property overrides the global property
                        fontColor: 'red',
                        fontSize: 12,
                    }
                },
                layout: {
                    padding: {
                        left: 40,
                        right: 50,
                        bottom: 0,
                        top: 0
                    }
                },
                scales: {
                    xAxes: [{
                        ticks: {
                            autoSkip: false,
                            maxRotation: 30,
                            minRotation: 30,
                            fontSize: 12,
                            labelMaxWidth: 20,
                        },
                        gridLines: {
                            offsetGridLines: true,
                            drawOnChartArea: true,
                        }
                    }],
                    yAxes: [{
                        gridLines: { display: false},
                        ticks: {
                            beginAtZero: true,
                            stepSize: 20
                        },
                    }]
                },
                //title: {
                //    display: true,
                //    text: 'Custom Chart Title'
                //},
            }
        });
    </script>

    </div>
  </div>
{% endblock content%}

